{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,iBAYA,MAAMC,EAAcC,SAASC,cAAc,cAK1CC,eAAeC,IACd,IACE,MAAMC,EAAM,oGAENC,QAAiBR,EAAAS,QAAMC,IAAIH,GAGjC,OAFAI,QAAQC,IAAIJ,EAASK,KAAKC,SAEnBN,EAASK,I,CAChB,MAAOE,GACPJ,QAAQI,MAAMA,E,EAiBlB,SAASC,GAAaC,MACpBA,EAAKC,MACLA,EAAKC,QACLA,EAAOC,GACPA,EAAEC,SACFA,EAAQC,eACRA,EAAcf,IACdA,I,IAGEgB,EAAUC,EAAAC,EADZ,MAAMC,GACJR,SAAU,QAAVK,EAAAL,EAAQ,UAAE,IAAVK,GAA8B,QAA9BC,EAAAD,EAAa,yBAAiB,IAAAC,GAAK,QAAnCC,EAAAD,EAAiC,UAAE,IAAAC,OAAnC,EAAUA,EAA2BlB,MACrC,+CAEEc,EAASM,OADc,MAEzBN,EAAWA,EAASO,MAAM,EAAGC,KAA0B,OAEzD,MAAMC,EAAO,IAAIC,KAAKT,GAKtB,MAAO,wCAAwCF,8IAGJM,6DACFP,uTAQJF,qDACKI,8FAdpB,GAHVS,EAAKE,UAAUC,WAAWC,SAAS,EAAG,SACnCJ,EAAKK,WAAa,GAAGF,WAAWC,SAAS,EAAG,QAC9CJ,EAAKM,cAAcH,wEAkBgB1B,yG,CAnElDL,EAAYmC,iBAAiB,SCX7B,SAAiCC,GAC/B,GAA2B,WAAvBA,EAAIC,OAAOC,QACb,OAGFC,gBAAkBH,EAAIC,OACtB,MAAMG,EAAWJ,EAAIC,OAAOI,QAAQ,sBAAsBC,QAAQxB,GAElE,GAAIkB,EAAIC,OAAOM,aAAa,WAAY,CACtCJ,gBAAgBK,gBAAgB,WAEhC,IAAIC,EAAUC,aAAaC,QAAQ,SAGnC,YAoCJ,SAAuBC,EAAcR,GACnC,MAAMS,EAAaD,EAAaE,QAAO,CAACC,EAAKC,KACvCA,EAAKlC,KAAOsB,GAGhBW,EAAIE,KAAKD,GAFAD,IAIR,IACGG,EAAaC,KAAKC,UAAUP,GAClCH,aAAaW,QAAQ,QAASH,E,CA9C5BI,CADqBH,KAAKI,MAAMd,GACJL,E,CAI9BD,gBAAgBqB,aAAa,WAAW,GAExC,MAAMC,EAAgBzB,EAAIC,OAAOI,QAAQ,sBAAsBC,QAAQxB,GACjE4C,EAAiB1B,EAAIC,OAAOI,QAAQ,OACpCjB,EAAWsC,EAAeC,WAAW,GAAGC,IACxC/C,EAAU6C,EAAeC,WAAW,GAAGE,YACvCC,EAAW9B,EAAIC,OAAOI,QAAQ,WAC9B1B,EAAQmD,EAASH,WAAW,GAAGE,YAC/B9C,EAAW+C,EAASH,WAAW,GAAGE,YAClC7C,EAAiB8C,EAASH,WAAW,GAAGA,WAAW,GAAGE,YACtD5D,EAAM6D,EAASH,WAAW,GAAGA,WAAW,GAAGI,KAEjD,IAAItB,EAAUC,aAAaC,QAAQ,SAGnC,MAAMqB,EAAS,CACblD,GAAI2C,EACJrC,SAAUA,EACVP,QAASA,EACTF,MAAOA,EACPI,SAAUA,EACVC,eAAgBA,EAChBf,IAAKA,GAGD2C,EAAeO,KAAKI,MAAMd,GAChCG,EAAaK,KAAKe,GAClB,MAAMd,EAAaC,KAAKC,UAAUR,GAClCF,aAAaW,QAAQ,QAASH,E,IDjChCtD,EAAYmC,iBAAiB,QAASkC,EAAAC,6BAoBtClE,IACGmE,MAAK,EAAC3D,QAAEA,KACAA,EAAQ4D,IAAI1D,GAAc2D,KAAK,MAEvCF,MARH,SAAwBG,GACtB1E,EAAY2E,UAAYD,C,IAyD1B5B,aAAaW,QAAQ,QAAS,MAC9BX,aAAaW,QAAQ,YAAY","sources":["src/js/news_cards.js","src/js/favorite_functions.js"],"sourcesContent":["import axios from 'axios';\nimport { addRemoveToLocalStorage, updateStorage } from './favorite_functions';\nimport { addRemoveToLocalStorageREAD} from './read';\n\nconst BASE_URL = 'https://api.nytimes.com/svc/';\nconst MOST_POPULAR = 'mostpopular/v2/viewed/1.json'; //тягнеться на home при загрузці\nconst CATEGORY_LIST = 'news/v3/content/section-list.json'; //потрібно для відмальовки dropdown menu\nconst CATEGORY_NEWS = 'news/v3/content/inyt/automobiles.json'; //фідбек на запит з dropdown menu\nconst SEARCHED_QUERY = 'search/v2/articlesearch.json'; //фідбек на запит з input\nconst API_KEY = 'mc1GG2VGT2VGMPz3mpzlHGRmnyjAqbuI';\nlet btnAddtoStorage;\n\nconst newsWrapper = document.querySelector('.list-news');\nnewsWrapper.addEventListener('click', addRemoveToLocalStorage);\nnewsWrapper.addEventListener('click', addRemoveToLocalStorageREAD);\n\n// standard\n async function getPopularNews() {\n  try {\n    const url = `${BASE_URL}${MOST_POPULAR}?api-key=${API_KEY}`;\n\n    const response = await axios.get(url);\n    console.log(response.data.results);\n    \n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction updateNewsList(markup) {\n  newsWrapper.innerHTML = markup;\n}\n\ngetPopularNews()\n  .then(({ results }) => {\n    return results.map(createMarkup).join('');\n  })\n  .then(updateNewsList);\n\n\n\n\nfunction createMarkup({\n  title,\n  media,\n  section,\n  id,\n  abstract,\n  published_date,\n  url,\n}) {\n  const imageUrl =\n    media?.[0]?.['media-metadata']?.[2]?.url ||\n    `https://source.unsplash.com/featured/?nature`;\n  const MAX_SNIPPET_LENGTH = 110;\n  if (abstract.length > MAX_SNIPPET_LENGTH) {\n    abstract = abstract.slice(0, MAX_SNIPPET_LENGTH - 3) + '...';\n  }\n  const date = new Date(published_date);\n  const day = date.getDate().toString().padStart(2, '0');\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const year = date.getFullYear().toString();\n  const formattedDate = `${day}/${month}/${year}`;\n  return `<li class=\"list-news__item\" data-id=\"${id}\" >\n      <article class=\"item-news__article\">\n        <div class=\"item-news__wrapper-img\">\n          <img class=\"item-news__img\" src=\"${imageUrl}\" alt=\"photo\">\n          <p class=\"item-news__category\">${section}</p>\n          <button class=\"item-news__add-to-favorite\" \n          <svg class=\"heart-icon\">\n                <use\n                  href=\"./images/symbol-defs.svg#icon-heart-empty\"\n                ></use></svg>Add to favorite\n          </button>\n        </div>\n        <h2 class=\"item-news__title\">${title}</h2>\n        <p class=\"item-news__description\">${abstract}</p>\n        <div class=\"item-news__info\">\n          <span class=\"item-news__info-date\">${formattedDate}</span>\n          <a class=\"item-news__info-link\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n        </div>\n      </article>\n    </li>`;\n}\n\n\n\nlocalStorage.setItem('cards', '[]');\nlocalStorage.setItem('read-more','[]');\n\nexport default getPopularNews;","export { addRemoveToLocalStorage, updateStorage };\n\nfunction addRemoveToLocalStorage(evt) {\n  if (evt.target.tagName !== 'BUTTON') {\n    return;\n  }\n\n  btnAddtoStorage = evt.target;\n  const btnDivID = evt.target.closest('li.list-news__item').dataset.id;\n\n  if (evt.target.hasAttribute('checked')) {\n    btnAddtoStorage.removeAttribute('checked');\n\n    let storage = localStorage.getItem('cards');\n    const parseStorage = JSON.parse(storage);\n    updateStorage(parseStorage, btnDivID);\n    return;\n  }\n\n  btnAddtoStorage.setAttribute('checked', true);\n\n  const choosenCardID = evt.target.closest('li.list-news__item').dataset.id;\n  const choosenCardImg = evt.target.closest('div');\n  const imageUrl = choosenCardImg.childNodes[1].src;\n  const section = choosenCardImg.childNodes[3].textContent;\n  const titleDiv = evt.target.closest('article');\n  const title = titleDiv.childNodes[3].textContent;\n  const abstract = titleDiv.childNodes[5].textContent;\n  const published_date = titleDiv.childNodes[7].childNodes[1].textContent;\n  const url = titleDiv.childNodes[7].childNodes[3].href;\n\n  let storage = localStorage.getItem('cards');\n\n  // додаємо елемент\n  const params = {\n    id: choosenCardID,\n    imageUrl: imageUrl,\n    section: section,\n    title: title,\n    abstract: abstract,\n    published_date: published_date,\n    url: url,\n  };\n\n  const parseStorage = JSON.parse(storage);\n  parseStorage.push(params);\n  const strStorage = JSON.stringify(parseStorage);\n  localStorage.setItem('cards', strStorage);\n}\n\n// _____\n\nfunction updateStorage(parseStorage, btnDivID) {\n  const newStorage = parseStorage.reduce((acc, card) => {\n    if (card.id === btnDivID) {\n      return acc;\n    }\n    acc.push(card);\n    return acc;\n  }, []);\n  const strStorage = JSON.stringify(newStorage);\n  localStorage.setItem('cards', strStorage);\n}\n"],"names":["$2shzp","parcelRequire","$1675df0f08f03197$var$newsWrapper","document","querySelector","async","$1675df0f08f03197$var$getPopularNews","url","response","default","get","console","log","data","results","error","$1675df0f08f03197$var$createMarkup","title","media","section","id","abstract","published_date","ref","ref1","ref2","imageUrl","length","slice","MAX_SNIPPET_LENGTH","date","Date","getDate","toString","padStart","getMonth","getFullYear","addEventListener","evt","target","tagName","btnAddtoStorage","btnDivID","closest","dataset","hasAttribute","removeAttribute","storage","localStorage","getItem","parseStorage","newStorage","reduce","acc","card","push","strStorage","JSON","stringify","setItem","$f5cf84364efc901b$export$ebda9f2b28852a0d","parse","setAttribute","choosenCardID","choosenCardImg","childNodes","src","textContent","titleDiv","href","params","$1oqhl","addRemoveToLocalStorageREAD","then","map","join","markup","innerHTML"],"version":3,"file":"index.74b8dfe1.js.map"}
!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r);var s=r("bpxeT"),i=r("2TvXO"),o=r("dIxxU");var c=r("cQS3G"),l="https://api.nytimes.com/svc/",d="mostpopular/v2/viewed/1.json",u="mc1GG2VGT2VGMPz3mpzlHGRmnyjAqbuI",g=document.querySelector(".list-news");function p(){return f.apply(this,arguments)}function f(){return(f=e(s)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(l).concat(d,"?api-key=").concat(u),e.next=4,o.default.get(n);case 4:return a=e.sent,console.log(a.data.results),e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function h(e){var t,n,a,r=e.title,s=e.media,i=e.section,o=e.id,c=e.abstract,l=e.published_date,d=e.url,u=(null==s||null===(t=s[0])||void 0===t||null===(n=t["media-metadata"])||void 0===n||null===(a=n[2])||void 0===a?void 0:a.url)||"https://source.unsplash.com/featured/?nature";c.length>110&&(c=c.slice(0,107)+"...");var g=new Date(l),p=g.getDate().toString().padStart(2,"0"),f=(g.getMonth()+1).toString().padStart(2,"0"),h=g.getFullYear().toString(),m="".concat(p,"/").concat(f,"/").concat(h);return'<li class="list-news__item" data-id="'.concat(o,'" >\n            <article class="item-news__article">\n              <div class="item-news__wrapper-img">\n                <img class="item-news__img" src="').concat(u,'" alt="photo">\n                <p class="item-news__category">').concat(i,'</p>\n                <div class="article_flag">\n                  <button class="article_flag--add"><span class="article_flag_text">Add to favorite</span> \n                    <svg width="16" height="16">\n                      <use href="./images/symbol-defs.svg#icon-heart-empty" width="16" height="16"></use>\n                    </svg>    \n                  </button>\n                  <button class="article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>\n                    <svg width="16" height="16">\n                      <use href="./images/symbol-defs.svg#icon-heart-fill" width="16" height="16"></use>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n              <h2 class="item-news__title">').concat(r,'</h2>\n              <p class="item-news__description">').concat(c,'</p>\n              <div class="item-news__info">\n                <span class="item-news__info-date">').concat(m,'</span>\n                <a class="item-news__info-link" href="').concat(d,'" target="_blank" rel="noreferrer noopener">Read more</a>\n              </div>\n            </article>\n          </li>')}g.addEventListener("click",(function(e){if("BUTTON"===e.target.tagName){btnAddtoStorage=e.target;var t=e.target.closest("li.list-news__item").dataset.id;if(e.target.hasAttribute("checked")){btnAddtoStorage.removeAttribute("checked");var n=localStorage.getItem("cards");!function(e,t){var n=e.reduce((function(e,n){return n.id===t||e.push(n),e}),[]),a=JSON.stringify(n);localStorage.setItem("cards",a)}(JSON.parse(n),t)}else{btnAddtoStorage.setAttribute("checked",!0);var a=e.target.closest("li.list-news__item").dataset.id,r=e.target.closest("div"),s=r.childNodes[1].src,i=r.childNodes[3].textContent,o=e.target.closest("article"),c=o.childNodes[3].textContent,l=o.childNodes[5].textContent,d=o.childNodes[7].childNodes[1].textContent,u=o.childNodes[7].childNodes[3].href,g=localStorage.getItem("cards"),p={id:a,imageUrl:s,section:i,title:c,abstract:l,published_date:d,url:u},f=JSON.parse(g);f.push(p);var h=JSON.stringify(f);localStorage.setItem("cards",h)}}})),g.addEventListener("click",c.addRemoveToLocalStorageREAD),p().then((function(e){return e.results.map(h).join("")})).then((function(e){g.innerHTML=e})),localStorage.setItem("cards","[]"),localStorage.setItem("read-more","[]")}();
//# sourceMappingURL=index.8d68d6df.js.map

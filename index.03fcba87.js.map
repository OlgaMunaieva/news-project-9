{"mappings":"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","sources":["src/js/news_cards.js","src/js/favorite_functions.js"],"sourcesContent":["import axios from 'axios';\nimport { addRemoveToLocalStorage, updateStorage } from './favorite_functions';\nimport { addRemoveToLocalStorageREAD} from './read';\n\nconst BASE_URL = 'https://api.nytimes.com/svc/';\nconst MOST_POPULAR = 'mostpopular/v2/viewed/1.json'; //тягнеться на home при загрузці\nconst CATEGORY_LIST = 'news/v3/content/section-list.json'; //потрібно для відмальовки dropdown menu\nconst CATEGORY_NEWS = 'news/v3/content/inyt/automobiles.json'; //фідбек на запит з dropdown menu\nconst SEARCHED_QUERY = 'search/v2/articlesearch.json'; //фідбек на запит з input\nconst API_KEY = 'mc1GG2VGT2VGMPz3mpzlHGRmnyjAqbuI';\nlet btnAddtoStorage;\n\nconst newsWrapper = document.querySelector('.list-news');\nnewsWrapper.addEventListener('click', addRemoveToLocalStorage);\nnewsWrapper.addEventListener('click', addRemoveToLocalStorageREAD);\n\n// standard\n async function getPopularNews() {\n  try {\n    const url = `${BASE_URL}${MOST_POPULAR}?api-key=${API_KEY}`;\n\n    const response = await axios.get(url);\n    console.log(response.data.results);\n    \n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction updateNewsList(markup) {\n  newsWrapper.innerHTML = markup;\n}\n\ngetPopularNews()\n  .then(({ results }) => {\n    return results.map(createMarkup).join('');\n  })\n  .then(updateNewsList);\n\n\n\n\nfunction createMarkup({\n  title,\n  media,\n  section,\n  id,\n  abstract,\n  published_date,\n  url,\n}) {\n  const imageUrl =\n    media?.[0]?.['media-metadata']?.[2]?.url ||\n    `https://source.unsplash.com/featured/?nature`;\n  const MAX_SNIPPET_LENGTH = 110;\n  if (abstract.length > MAX_SNIPPET_LENGTH) {\n    abstract = abstract.slice(0, MAX_SNIPPET_LENGTH - 3) + '...';\n  }\n  const date = new Date(published_date);\n  const day = date.getDate().toString().padStart(2, '0');\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const year = date.getFullYear().toString();\n  const formattedDate = `${day}/${month}/${year}`;\n  return `<li class=\"list-news__item\" data-id=\"${id}\" >\n      <article class=\"item-news__article\">\n        <div class=\"item-news__wrapper-img\">\n          <img class=\"item-news__img\" src=\"${imageUrl}\" alt=\"photo\">\n          <p class=\"item-news__category\">${section}</p>\n          <button class=\"item-news__add-to-favorite\" \n          <svg class=\"heart-icon\">\n                <use\n                  href=\"./images/symbol-defs.svg#icon-heart-empty\"\n                ></use></svg>Add to favorite\n          </button>\n        </div>\n        <h2 class=\"item-news__title\">${title}</h2>\n        <p class=\"item-news__description\">${abstract}</p>\n        <div class=\"item-news__info\">\n          <span class=\"item-news__info-date\">${formattedDate}</span>\n          <a class=\"item-news__info-link\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n        </div>\n      </article>\n    </li>`;\n}\n\n\n\nlocalStorage.setItem('cards', '[]');\nlocalStorage.setItem('read-more','[]');\n\nexport default getPopularNews;","export { addRemoveToLocalStorage, updateStorage };\n\nfunction addRemoveToLocalStorage(evt) {\n  if (evt.target.tagName !== 'BUTTON') {\n    return;\n  }\n\n  btnAddtoStorage = evt.target;\n  const btnDivID = evt.target.closest('li.list-news__item').dataset.id;\n\n  if (evt.target.hasAttribute('checked')) {\n    btnAddtoStorage.removeAttribute('checked');\n\n    let storage = localStorage.getItem('cards');\n    const parseStorage = JSON.parse(storage);\n    updateStorage(parseStorage, btnDivID);\n    return;\n  }\n\n  btnAddtoStorage.setAttribute('checked', true);\n\n  const choosenCardID = evt.target.closest('li.list-news__item').dataset.id;\n  const choosenCardImg = evt.target.closest('div');\n  const imageUrl = choosenCardImg.childNodes[1].src;\n  const section = choosenCardImg.childNodes[3].textContent;\n  const titleDiv = evt.target.closest('article');\n  const title = titleDiv.childNodes[3].textContent;\n  const abstract = titleDiv.childNodes[5].textContent;\n  const published_date = titleDiv.childNodes[7].childNodes[1].textContent;\n  const url = titleDiv.childNodes[7].childNodes[3].href;\n\n  let storage = localStorage.getItem('cards');\n\n  // додаємо елемент\n  const params = {\n    id: choosenCardID,\n    imageUrl: imageUrl,\n    section: section,\n    title: title,\n    abstract: abstract,\n    published_date: published_date,\n    url: url,\n  };\n\n  const parseStorage = JSON.parse(storage);\n  parseStorage.push(params);\n  const strStorage = JSON.stringify(parseStorage);\n  localStorage.setItem('cards', strStorage);\n}\n\n// _____\n\nfunction updateStorage(parseStorage, btnDivID) {\n  const newStorage = parseStorage.reduce((acc, card) => {\n    if (card.id === btnDivID) {\n      return acc;\n    }\n    acc.push(card);\n    return acc;\n  }, []);\n  const strStorage = JSON.stringify(newStorage);\n  localStorage.setItem('cards', strStorage);\n}\n"],"names":["$bpxeT","parcelRequire","$7bac75000fd467ef$var$BASE_URL","$7bac75000fd467ef$var$MOST_POPULAR","$7bac75000fd467ef$var$API_KEY","$7bac75000fd467ef$var$newsWrapper","document","querySelector","$7bac75000fd467ef$var$getPopularNews","$7bac75000fd467ef$var$_getPopularNews","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","url","response","concat","$dIxxU","default","get","_ctx","sent","console","log","data","results","error","t0","$7bac75000fd467ef$var$createMarkup","param","ref","ref1","ref2","title","media","section","id","abstract","published_date","imageUrl","length","slice","MAX_SNIPPET_LENGTH","date","Date","day","getDate","toString","padStart","month","getMonth","year","getFullYear","formattedDate","addEventListener","evt","target","tagName","btnAddtoStorage","btnDivID","closest","dataset","hasAttribute","removeAttribute","storage","localStorage","getItem","parseStorage","newStorage","reduce","acc","card","push","strStorage","JSON","stringify","setItem","$dbcae0eeb23859d6$export$ebda9f2b28852a0d","parse","setAttribute","choosenCardID","choosenCardImg","childNodes","src","textContent","titleDiv","href","storage1","params","parseStorage1","$cQS3G","addRemoveToLocalStorageREAD","then","map","join","markup","innerHTML"],"version":3,"file":"index.03fcba87.js.map"}
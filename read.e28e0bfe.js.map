{"mappings":"AAAA,MAAMA,EAAgBC,SAASC,cAAc,mBAGvCC,GADOC,KAAKC,MAAMC,aAAaC,QAAQ,QACzBH,KAAKC,MAAMC,aAAaC,QAAQ,eAC9CC,EAAgB,IACjB,IAAIC,IAAIN,EAAYO,KAAIC,GAAQ,CAACA,EAAS,GAAGA,MAAQC,UA+B1D,SAASC,GAAaC,MACpBA,EAAKC,MACLA,EAAKC,QACLA,EAAOC,GACPA,EAAEC,SACFA,EAAQC,eACRA,EAAcC,IACdA,EAAGC,SACHA,I,IAGEC,EAAUC,EAAAC,EAAVT,SAAU,QAAVO,EAAAP,EAAQ,UAAE,IAAVO,GAA8B,QAA9BC,EAAAD,EAAa,yBAAiB,IAAAC,GAAK,QAAnCC,EAAAD,EAAiC,UAAE,IAAAC,GAAzBA,EAA2BJ,IAInCF,EAASO,OADc,MAEzBP,EAAWA,EAASQ,MAAM,EAAGC,KAA0B,OAEzD,MAAMC,EAAO,IAAIC,KAAKV,GAKtB,MAAO,wCAAwCF,gKAGEI,mEACFL,uqCAUJF,2DACKI,0GAhB1B,GAHVU,EAAKE,UAAUC,WAAWC,SAAS,EAAG,SACnCJ,EAAKK,WAAa,GAAGF,WAAWC,SAAS,EAAG,QAC9CJ,EAAKM,cAAcH,8EAoBsBX,2H,CAMxD,SAASe,EAAiBC,GACxBC,KAAKC,UAAUC,OAAO,UACtB,IAAIC,EAAQH,KAAKI,mBACjBC,QAAQC,IAAIH,GACZ,MAAMZ,EAAOS,KAAKO,YACZC,EAAUrC,EAAcsC,QAAOnC,GAAQA,EAAKoC,OAASnB,IAC3Dc,QAAQC,IAAIE,GACZ,MAAMG,EAAOH,EAAQnC,IAAIG,GAAcoC,KAAK,IAC5CT,EAAMU,UAAYF,EACU,SAAxBR,EAAMW,MAAMC,QACdZ,EAAMW,MAAMC,QAAU,OAEtBZ,EAAMW,MAAMC,QAAU,M,EAlF1B,WACE,IACG9C,aAAaC,QAAQ,cACgB,OAAtCD,aAAaC,QAAQ,aAErB,OAGF,MAAM8C,EAZS,IAAI,IAAIC,IAWQ9C,EAXAE,KAAIC,GAAQA,EAAKoC,KAAKhB,eAalDrB,KACCC,GACE,6BAA6BA,4EAMhCsC,KAAK,IACRjD,EAAckD,UAAYG,C,CAG5BE,GAiEA,IACIC,EADAC,EAAMxD,SAASyD,uBAAuB,aAG1C,IAAKF,EAAI,EAAGA,EAAIC,EAAIhC,OAAQ+B,IAC1BC,EAAID,GAAGG,iBAAiB,QAASxB","sources":["src/js/read.js"],"sourcesContent":["const readContainer = document.querySelector('.container-read');\n\nconst news = JSON.parse(localStorage.getItem('all'));\nconst readStorage = JSON.parse(localStorage.getItem('read-more'));\nconst uniqueStorage = [\n  ...new Map(readStorage.map(item => [item['id'], item])).values(),\n];\n\nfunction getDatesFromNews(arr) {\n  const result = [...new Set(arr.map(item => item.time.toString()))];\n  return result;\n}\n\nfunction renderAccordion() {\n  if (\n    !localStorage.getItem('read-more') ||\n    localStorage.getItem('read-more') === '[]'\n  ) {\n    return;\n  }\n  const array = getDatesFromNews(uniqueStorage);\n  const acordions = array\n    .map(\n      item =>\n        `<button class=\"accordion\">${item}</button>\n        <ul class=\"panel list-news\">\n\n        </ul>\n    `\n    )\n    .join('');\n  readContainer.innerHTML = acordions;\n}\n\nrenderAccordion();\n\nfunction createMarkup({\n  title,\n  media,\n  section,\n  id,\n  abstract,\n  published_date,\n  url,\n  imageUrl,\n}) {\n  const imageUrL =\n    media?.[0]?.['media-metadata']?.[2]?.url ||\n    `https://source.unsplash.com/featured/?nature`;\n\n  const MAX_SNIPPET_LENGTH = 110;\n  if (abstract.length > MAX_SNIPPET_LENGTH) {\n    abstract = abstract.slice(0, MAX_SNIPPET_LENGTH - 3) + '...';\n  }\n  const date = new Date(published_date);\n  const day = date.getDate().toString().padStart(2, '0');\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const year = date.getFullYear().toString();\n  const formattedDate = `${day}/${month}/${year}`;\n  return `<li class=\"list-news__item\" data-id=\"${id}\" >\n            <article class=\"item-news__article\">\n              <div class=\"item-news__wrapper-img\">\n                <img class=\"item-news__img\" src=\"${imageUrl}\" alt=\"photo\">\n                <p class=\"item-news__category\">${section}</p>\n                <div class=\"article_flag\">\n                  <button class=\"article_flag--add\"><span class=\"article_flag_text\">Add to favorite</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"none\" stroke=\"#4440f7\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z\"/></svg>\n                  </button>\n                  <button class=\"article_flag--remove is-hidden\"><span class=\"article_flag_text\">Remove from favorite</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"#4b48da\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z\"/></svg>\n                  </button>\n                </div>\n              </div>\n              <h2 class=\"item-news__title\">${title}</h2>\n              <p class=\"item-news__description\">${abstract}</p>\n              <div class=\"item-news__info\">\n                <span class=\"item-news__info-date\">${formattedDate}</span>\n                <a class=\"item-news__info-link\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n              </div>\n            </article>\n          </li>`;\n}\n\nfunction accordionHandler(e) {\n  this.classList.toggle('active');\n  var panel = this.nextElementSibling;\n  console.log(panel);\n  const date = this.textContent;\n  const filtred = uniqueStorage.filter(item => item.time === date);\n  console.log(filtred);\n  const liel = filtred.map(createMarkup).join('');\n  panel.innerHTML = liel;\n  if (panel.style.display === 'flex') {\n    panel.style.display = 'none';\n  } else {\n    panel.style.display = 'flex';\n  }\n}\n\nvar acc = document.getElementsByClassName('accordion');\nvar i;\n\nfor (i = 0; i < acc.length; i++) {\n  acc[i].addEventListener('click', accordionHandler);\n}\n"],"names":["$103c6abfc3a0e310$var$readContainer","document","querySelector","$103c6abfc3a0e310$var$readStorage","JSON","parse","localStorage","getItem","$103c6abfc3a0e310$var$uniqueStorage","Map","map","item","values","$103c6abfc3a0e310$var$createMarkup","title","media","section","id","abstract","published_date","url","imageUrl","ref","ref1","ref2","length","slice","MAX_SNIPPET_LENGTH","date","Date","getDate","toString","padStart","getMonth","getFullYear","$103c6abfc3a0e310$var$accordionHandler","e","this","classList","toggle","panel","nextElementSibling","console","log","textContent","filtred","filter","time","liel","join","innerHTML","style","display","acordions","Set","$103c6abfc3a0e310$var$renderAccordion","$103c6abfc3a0e310$var$i","$103c6abfc3a0e310$var$acc","getElementsByClassName","addEventListener"],"version":3,"file":"read.e28e0bfe.js.map"}
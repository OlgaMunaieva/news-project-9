{"mappings":"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","sources":["src/js/read.js"],"sourcesContent":["\n\nconst readContainer = document.querySelector('.container-read');\n\nconst news = JSON.parse(localStorage.getItem(\"all\")); \nconst readStorage = JSON.parse(localStorage.getItem(\"read-more\"));\n\n\nfunction getDatesFromNews(arr){\n  const result = [...new Set(arr.map(item => item.time.toString()))];\n  return result;\n}\n\n\nfunction renderAccordion() {\n  if(!localStorage.getItem('read-more') || localStorage.getItem('read-more') === '[]'){\n    return;\n  }\n  const array = getDatesFromNews(readStorage)\n  const acordions = array\n    .map(\n      item =>\n        `<button class=\"accordion\">${item}</button>\n        <ul class=\"panel list-news\">\n          \n        </ul>\n    `\n    )\n    .join('');\n  readContainer.innerHTML = acordions;\n}\n\nrenderAccordion();\n\nfunction addRemoveToLocalStorageREAD(evt) {\n  if (evt.target.nodeName !== 'A' ) {\n    return;\n  }\n\n  const readMoreLink = evt.target;\n  readMoreLink.setAttribute('data-is-read', true);\n\n  const ulItem = evt.target.parentElement.parentElement.parentElement;\n  console.log('li item',ulItem);\n  const read = document.createElement('p');\n  read.innerText = 'Already read';\n  read.classList.add('have-read');\n  ulItem.appendChild(read);\n  ulItem.style.opacity = 0.22;\n  const ID = ulItem.getAttribute('data-id');\n\n  const choosenCardID = evt.target.closest('li.list-news__item').dataset.id;\n  const choosenCardImg = evt.target.closest('div');\n  const imageUrl = ulItem.childNodes[1].childNodes[1].childNodes[1].getAttribute('src');\n  const section = choosenCardImg.childNodes[3].textContent;\n  const titleDiv = evt.target.closest('article');\n  const title = titleDiv.childNodes[3].textContent;\n  const abstract = titleDiv.childNodes[5].textContent;\n  const published_date = titleDiv.childNodes[7].childNodes[1].textContent;\n  const url = titleDiv.childNodes[7].childNodes[3].href;\n  const time = new Date().getTime();\n  const date = new Date(time);\n\n  let storage = localStorage.getItem('read-more');\n  console.log(imageUrl);\n  // додаємо елемент\n  const params = {\n    id: choosenCardID,\n    imageUrl: imageUrl,\n    section: section,\n    title: title,\n    abstract: abstract,\n    published_date: published_date,\n    url: url,\n    time: date.toLocaleDateString('en-GB'),\n  };\n\n  const parseStorage = JSON.parse(storage);\n  parseStorage.push(params);\n  const strStorage = JSON.stringify(parseStorage);\n  localStorage.setItem('read-more', strStorage);\n}\nfunction createMarkup({\n  title,\n  media,\n  section,\n  id,\n  abstract,\n  published_date,\n  url,\n  imageUrl\n}) {\n  const imageUrL =\n    media?.[0]?.['media-metadata']?.[2]?.url ||\n    `https://source.unsplash.com/featured/?nature`;\n  \n  const MAX_SNIPPET_LENGTH = 110;\n  if (abstract.length > MAX_SNIPPET_LENGTH) {\n    abstract = abstract.slice(0, MAX_SNIPPET_LENGTH - 3) + '...';\n  }\n  const date = new Date(published_date);\n  const day = date.getDate().toString().padStart(2, '0');\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const year = date.getFullYear().toString();\n  const formattedDate = `${day}/${month}/${year}`;\n  return `<li class=\"list-news__item\" data-id=\"${id}\" >\n            <article class=\"item-news__article\">\n              <div class=\"item-news__wrapper-img\">\n                <img class=\"item-news__img\" src=\"${imageUrl}\" alt=\"photo\">\n                <p class=\"item-news__category\">${section}</p>\n                <div class=\"article_flag\">\n                  <button class=\"article_flag--add\"><span class=\"article_flag_text\">Add to favorite</span>\n                    <svg width=\"16\" height=\"16\">\n                      <use href=\"./images/symbol-defs.svg#icon-heart-empty\" width=\"16\" height=\"16\"></use>\n                    </svg>\n                  </button>\n                  <button class=\"article_flag--remove is-hidden\"><span class=\"article_flag_text\">Remove from favorite</span>\n                    <svg width=\"16\" height=\"16\">\n                      <use href=\"./images/symbol-defs.svg#icon-heart-fill\" width=\"16\" height=\"16\"></use>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n              <h2 class=\"item-news__title\">${title}</h2>\n              <p class=\"item-news__description\">${abstract}</p>\n              <div class=\"item-news__info\">\n                <span class=\"item-news__info-date\">${formattedDate}</span>\n                <a class=\"item-news__info-link\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n              </div>\n            </article>\n          </li>`;\n}\n\n\nfunction accordionHandler(e){\n  this.classList.toggle(\"active\");\n  var panel = this.nextElementSibling;\n  console.log(panel);\n  const date = this.textContent;\n  const filtred = readStorage.filter(item=>item.time === date);\n  const liel = filtred.map(createMarkup).join(\"\");\n  panel.innerHTML = liel;\n  if (panel.style.display === \"flex\") {\n    panel.style.display = \"none\";\n  } else {\n    panel.style.display = \"flex\";\n  }\n  \n}\n\nvar acc = document.getElementsByClassName(\"accordion\");\nvar i;\n\nfor (i = 0; i < acc.length; i++) {\n  acc[i].addEventListener(\"click\", accordionHandler);\n}\n\n\nexport default addRemoveToLocalStorageREAD\n//  function readHandler(evt){\n//     console.log(evt.target);\n//     if(evt.target.nodeName !== 'LABEL' ){\n//         console.log('neto');\n//         return\n//     }\n//  }\n\n// readContainer.addEventListener('click',readHandler);\n\n/*<div class=\"list-news__item\" data-id=\"${id}\" >\n            <article class=\"item-news__article\">\n              <div class=\"item-news__wrapper-img\">\n                <img class=\"item-news__img\" src=\"${imageUrl}\" alt=\"photo\">\n                <p class=\"item-news__category\">${section}</p>\n                <button class=\"item-news__add-to-favorite\"\n                <svg class=\"heart-icon\">\n                      <use\n                        href=\"./images/symbol-defs.svg#icon-heart-empty\"\n                      ></use></svg>Add to favorite\n                </button>\n              </div>\n              <h2 class=\"item-news__title\">${title}</h2>\n              <p class=\"item-news__description\">${abstract}</p>\n              <div class=\"item-news__info\">\n                <span class=\"item-news__info-date\">${formattedDate}</span>\n                <a class=\"item-news__info-link\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n              </div>\n            </article>\n          </div>\n\n          <div class=\"collapsible-accordion\">\n            <div class=\"collapsible-item\">\n                <input type=\"radio\" id=\"rad1\" name=\"radio\">\n                <label class=\"collapsible-item-label\" for=\"rad1\">Item 1</label>\n                <div class=\"collapsible-item-content\">\n                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsum, reiciendis!\n                </div>\n            </div>\n        </div>\n */\n"],"names":["$103c6abfc3a0e310$var$readContainer","document","querySelector","$103c6abfc3a0e310$var$readStorage","JSON","parse","localStorage","getItem","$103c6abfc3a0e310$var$createMarkup","title","media","section","id","abstract","published_date","url","imageUrl","ref","ref1","ref2","length","slice","MAX_SNIPPET_LENGTH","date","Date","getDate","toString","padStart","getMonth","getFullYear","$103c6abfc3a0e310$var$accordionHandler","e","this","classList","toggle","panel","nextElementSibling","console","log","textContent","liel","filter","item","time","map","join","innerHTML","style","display","acordions","Set","$103c6abfc3a0e310$var$renderAccordion","$103c6abfc3a0e310$var$i","$103c6abfc3a0e310$var$acc","getElementsByClassName","addEventListener","$103c6abfc3a0e310$export$2e2bcd8739ae039","evt","target","nodeName","setAttribute","ulItem","parentElement","read","createElement","innerText","add","appendChild","opacity","getAttribute","choosenCardID","closest","dataset","choosenCardImg","childNodes","titleDiv","href","getTime","storage","params","toLocaleDateString","parseStorage","push","strStorage","stringify","setItem"],"version":3,"file":"read.b305af07.js.map"}